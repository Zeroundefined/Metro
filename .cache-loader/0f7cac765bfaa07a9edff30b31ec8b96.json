{"remainingRequest":"/Users/zhangmuren/project/Metro/node_modules/thread-loader/dist/cjs.js??ref--4-1!/Users/zhangmuren/project/Metro/node_modules/ts-loader/index.js??ref--4-2!/Users/zhangmuren/project/Metro/src/pages/Reports/ReportCard/WorkingCard.tsx","dependencies":[{"path":"/Users/zhangmuren/project/Metro/src/pages/Reports/ReportCard/WorkingCard.tsx","mtime":1529848990000},{"path":"/Users/zhangmuren/project/Metro/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/Users/zhangmuren/project/Metro/node_modules/thread-loader/dist/cjs.js","mtime":0},{"path":"/Users/zhangmuren/project/Metro/node_modules/ts-loader/index.js","mtime":1528433923000}],"contextDependencies":[],"result":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst React = require(\"react\");\nconst ReactHighcharts = require(\"react-highcharts\");\nconst components_1 = require(\"../../../components\");\nrequire(\"./WorkingCard.scss\");\nclass WorkingCard extends React.Component {\n    constructor() {\n        super(...arguments);\n        this.fixNumber = num => {\n            return num && Number((num * 100).toFixed(2));\n        };\n        this.handleReachRatioConfig = () => {\n            const { data } = this.props;\n            let { reachRatio } = data;\n            return {\n                title: {\n                    text: '施工计划兑现率'\n                },\n                colors: ['#40a9ff', 'rgba(0,0,0,0.05)'],\n                series: [{\n                        type: 'pie',\n                        data: [\n                            {\n                                name: '施工计划兑现率',\n                                y: this.fixNumber(reachRatio),\n                                sliced: true,\n                                dataLabels: {\n                                    enabled: true,\n                                    format: '<b>{point.name}</b>: {point.percentage:.1f} %',\n                                },\n                            },\n                            {\n                                name: 'Userless',\n                                y: this.fixNumber(1 - reachRatio),\n                                dataLabels: {\n                                    enabled: false,\n                                },\n                            },\n                        ]\n                    }]\n            };\n        };\n        this.handleWorkingTimeRateConfig = () => {\n            const { data } = this.props;\n            let { hourRatio } = data;\n            return {\n                title: {\n                    text: '施工计划工时利用率'\n                },\n                colors: ['#40a9ff', 'rgba(0,0,0,0.05)'],\n                series: [{\n                        type: 'pie',\n                        data: [\n                            {\n                                name: '施工计划兑现率',\n                                y: this.fixNumber(hourRatio),\n                                sliced: true,\n                                dataLabels: {\n                                    enabled: false,\n                                },\n                            },\n                            {\n                                name: 'Userless',\n                                y: this.fixNumber(1 - hourRatio),\n                                dataLabels: {\n                                    enabled: true,\n                                    format: '<b>{point.name}</b>: {point.percentage:.1f} %',\n                                },\n                            },\n                        ]\n                    }]\n            };\n        };\n        this.handleUpdateRatioConfig = () => {\n            const { data } = this.props;\n            let { updateRatio } = data;\n            return {\n                title: {\n                    text: '施工计划变更率'\n                },\n                colors: ['#40a9ff', 'rgba(0,0,0,0.05)'],\n                series: [{\n                        type: 'pie',\n                        data: [\n                            {\n                                name: '施工计划变更率',\n                                y: this.fixNumber(updateRatio),\n                                sliced: true,\n                                dataLabels: {\n                                    enabled: true,\n                                    format: '<b>{point.name}</b>: {point.percentage:.1f} %',\n                                },\n                            },\n                            {\n                                name: 'Userless',\n                                y: this.fixNumber(1 - updateRatio),\n                                dataLabels: {\n                                    enabled: false,\n                                },\n                            },\n                        ]\n                    }]\n            };\n        };\n        this.handleLineDividedConfig = () => {\n            const { data } = this.props;\n            let { lineDivided } = data;\n            let list = lineDivided && lineDivided.reduce((tol, cur) => {\n                tol.push(cur[1]);\n                return tol;\n            }, []);\n            return {\n                chart: {\n                    type: 'column'\n                },\n                title: {\n                    text: '施工数量(路线)'\n                },\n                xAxis: {\n                    categories: [\n                        '一号线', '二号线', '三号线', '四号线', '五号线', '六号线', '七号线', '八号线', '九号线', '十号线', '十一号线', '十二号线', '十三号线', '十四号线', '十五号线', '十六号线', '十七号线'\n                    ],\n                    crosshair: true\n                },\n                yAxis: {\n                    min: 0,\n                    title: {\n                        text: '施工数量'\n                    }\n                },\n                tooltip: {\n                    // head + 每个 point + footer 拼接成完整的 table\n                    headerFormat: `<span style='font-size:10px'>{point.key}</span><table>`,\n                    pointFormat: `<tr><td style='color:{series.color};padding:0'>{series.name}: </td>' +\n          '<td style='padding:0'><b>{point.y:.1f} mm</b></td></tr>`,\n                    footerFormat: '</table>',\n                    shared: true,\n                    useHTML: true\n                },\n                series: [{\n                        data: list\n                    }]\n            };\n        };\n        this.handleHourDividedConfig = () => {\n            const { data } = this.props;\n            let { hourDivided } = data;\n            let categories = [];\n            let datas = [];\n            hourDivided && hourDivided.map(divid => {\n                categories.push(divid.key);\n                datas.push(divid.value);\n            });\n            return {\n                chart: {\n                    type: 'area'\n                },\n                title: {\n                    text: '施工数量（每小时）'\n                },\n                xAxis: {\n                    allowDecimals: false,\n                    categories: categories,\n                },\n                yAxis: {\n                    title: {\n                        text: '施工小时'\n                    },\n                    labels: {\n                        formatter: function () {\n                            return this.value + 'h';\n                        }\n                    }\n                },\n                series: [{\n                        data: datas\n                    }]\n            };\n        };\n    }\n    render() {\n        const { data } = this.props;\n        const cashRate = {\n            title: {\n                text: '兑现率（日）'\n            },\n            colors: ['#40a9ff', 'rgba(0,0,0,0.05)'],\n            series: [{\n                    type: 'pie',\n                    data: [\n                        {\n                            name: 'Useful',\n                            y: 66.0,\n                            sliced: true,\n                            dataLabels: {\n                                enabled: true,\n                                format: '<b>{point.name}</b>: {point.percentage:.1f} %',\n                            },\n                        },\n                        {\n                            name: 'Userless',\n                            y: 34.0,\n                            dataLabels: {\n                                enabled: true,\n                                format: '<b>{point.name}</b>: {point.percentage:.1f} %',\n                            },\n                        },\n                    ]\n                }]\n        };\n        const workingTimeRate = {\n            title: {\n                text: '工时利用率（日）'\n            },\n            colors: ['#f5222d', 'rgba(0,0,0,0.05)'],\n            series: [{\n                    type: 'pie',\n                    data: [\n                        {\n                            name: 'Useful',\n                            y: 44.0,\n                            sliced: true,\n                            dataLabels: {\n                                enabled: true,\n                                format: '<b>{point.name}</b>: {point.percentage:.1f} %',\n                            },\n                        },\n                        {\n                            name: 'Userless',\n                            y: 56.0,\n                            dataLabels: {\n                                enabled: true,\n                                format: '<b>{point.name}</b>: {point.percentage:.1f} %',\n                            },\n                        },\n                    ]\n                }]\n        };\n        const standardRate = {\n            title: {\n                text: '实施规范率（日）'\n            },\n            colors: ['#f5222d', 'rgba(0,0,0,0.05)'],\n            series: [{\n                    type: 'pie',\n                    data: [\n                        {\n                            name: 'Useful',\n                            y: 26.0,\n                            sliced: true,\n                            dataLabels: {\n                                enabled: true,\n                                format: '<b>{point.name}</b>: {point.percentage:.1f} %',\n                            },\n                        },\n                        {\n                            name: 'Userless',\n                            y: 74.0,\n                            dataLabels: {\n                                enabled: true,\n                                format: '<b>{point.name}</b>: {point.percentage:.1f} %',\n                            },\n                        },\n                    ]\n                }]\n        };\n        const changeRate = {\n            title: {\n                text: '计划变更率（日）'\n            },\n            chart: {\n                borderColor: '#eee'\n            },\n            colors: ['#fa8c16', 'rgba(0,0,0,0.05)'],\n            series: [{\n                    type: 'pie',\n                    data: [\n                        {\n                            name: 'Useful',\n                            y: 26.0,\n                            sliced: true,\n                            dataLabels: {\n                                enabled: true,\n                                format: '<b>{point.name}</b>: {point.percentage:.1f} %',\n                            },\n                        },\n                        {\n                            name: 'Userless',\n                            y: 74.0,\n                            dataLabels: {\n                                enabled: true,\n                                format: '<b>{point.name}</b>: {point.percentage:.1f} %',\n                            },\n                        },\n                    ]\n                }]\n        };\n        const lineConstConf = {\n            chart: {\n                type: 'column'\n            },\n            title: {\n                text: '月平均降雨量'\n            },\n            subtitle: {\n                text: '数据来源: WorldClimate.com'\n            },\n            xAxis: {\n                categories: [\n                    '一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'\n                ],\n                crosshair: true\n            },\n            yAxis: {\n                min: 0,\n                title: {\n                    text: '降雨量 (mm)'\n                }\n            },\n            tooltip: {\n                // head + 每个 point + footer 拼接成完整的 table\n                headerFormat: `<span style='font-size:10px'>{point.key}</span><table>`,\n                pointFormat: `<tr><td style='color:{series.color};padding:0'>{series.name}: </td>' +\n          '<td style='padding:0'><b>{point.y:.1f} mm</b></td></tr>`,\n                footerFormat: '</table>',\n                shared: true,\n                useHTML: true\n            },\n            series: [{\n                    data: [49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]\n                }]\n        };\n        const hourConstConf = {\n            chart: {\n                type: 'area'\n            },\n            title: {\n                text: '施工数量（每小时）'\n            },\n            xAxis: {\n                allowDecimals: false\n            },\n            yAxis: {\n                title: {\n                    text: '施工小时'\n                },\n                labels: {\n                    formatter: function () {\n                        return this.value + 'h';\n                    }\n                }\n            },\n            series: [{\n                    data: [14, 12, 1, 3, 22, 6, 11, 22, 18, 12, 23, 23,\n                        18, 14, 18, 18, 18, 18, 14, 22, 18, 18,\n                        18, 14, 14, 18, 18, 18, 14, 17, 14,\n                        18, 18, 14, 21, 21, 19, 14, 23, 16,\n                        22, 19, 22, 14, 19, 19, 19, 19, 19,\n                        19, 21, 17, 21, 14, 17, 14, 18, 17,\n                        17, 17, 17, 17, 17, 14, 17, 17, 17]\n                }]\n        };\n        return React.createElement(components_1.Card, { className: 'working-card', title: '\\u65BD\\u5DE5\\u6A21\\u5757' },\n            React.createElement(\"div\", { style: { minWidth: '220px', width: '50%' } },\n                React.createElement(ReactHighcharts, { config: this.handleReachRatioConfig() })),\n            React.createElement(\"div\", { style: { minWidth: '220px', width: '50%' } },\n                React.createElement(ReactHighcharts, { config: this.handleWorkingTimeRateConfig() })),\n            React.createElement(\"div\", { style: { minWidth: '220px', width: '50%' } },\n                React.createElement(ReactHighcharts, { config: this.handleUpdateRatioConfig() })),\n            React.createElement(\"div\", { className: \"illegal\", style: { textAlign: 'center', margin: 'auto' } },\n                React.createElement(\"div\", { className: \"text\", style: { color: '#333333', fontSize: '18px' } }, \"\\u65BD\\u5DE5\\u8FDD\\u89C4\\u9879\"),\n                React.createElement(\"div\", { className: \"content\", style: { color: '#3cc5d4', marginTop: '40px', fontSize: '30px' } },\n                    \"\\u8FDD\\u89C4\\u65BD\\u5DE5\",\n                    React.createElement(\"span\", { style: { margin: '0 10px', fontSize: '50px', color: '#f5be25' } }, data.illegal),\n                    \"\\u8D77\")),\n            React.createElement(\"div\", { style: { minWidth: '220px', width: '50%' } },\n                React.createElement(ReactHighcharts, { config: this.handleLineDividedConfig() })),\n            React.createElement(\"div\", { style: { minWidth: '220px', width: '50%' } },\n                React.createElement(ReactHighcharts, { config: this.handleHourDividedConfig() })));\n    }\n}\nexports.WorkingCard = WorkingCard;\n",{"version":3,"file":"/Users/zhangmuren/project/Metro/src/pages/Reports/ReportCard/WorkingCard.tsx","sourceRoot":"","sources":["/Users/zhangmuren/project/Metro/src/pages/Reports/ReportCard/WorkingCard.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport * as ReactHighcharts from 'react-highcharts';\nimport { Card } from '../../../components';\nimport './WorkingCard.scss';\n\ninterface Props {\n  data: any;\n}\n\nexport class WorkingCard extends React.Component<Props> {\n  fixNumber = num => {\n    return num && Number((num * 100).toFixed(2))\n  }\n  handleReachRatioConfig = () => {\n    const { data } = this.props;\n    let { reachRatio } = data;\n    return {\n      title: {\n        text: '施工计划兑现率'\n      },\n      colors: ['#40a9ff', 'rgba(0,0,0,0.05)'],\n      series: [{\n        type: 'pie',\n        data: [\n          {\n            name: '施工计划兑现率',\n            y: this.fixNumber(reachRatio),\n            sliced: true,\n            dataLabels: {\n              enabled: true,\n              format: '<b>{point.name}</b>: {point.percentage:.1f} %',\n\n            },\n          },\n          {\n            name: 'Userless',\n            y: this.fixNumber(1-reachRatio),\n            dataLabels: {\n              enabled: false,\n            },\n          },\n        ]\n      }]\n    }\n  }\n\n  handleWorkingTimeRateConfig = () => {\n    const { data } = this.props;\n    let { hourRatio } = data;\n    return {\n      title: {\n        text: '施工计划工时利用率'\n      },\n      colors: ['#40a9ff', 'rgba(0,0,0,0.05)'],\n      series: [{\n        type: 'pie',\n        data: [\n          {\n            name: '施工计划兑现率',\n            y: this.fixNumber(hourRatio),\n            sliced: true,\n            dataLabels: {\n              enabled: false,\n            },\n          },\n          {\n            name: 'Userless',\n            y: this.fixNumber(1-hourRatio),\n            dataLabels: {\n              enabled: true,\n              format: '<b>{point.name}</b>: {point.percentage:.1f} %',\n            },\n          },\n        ]\n      }]\n    }\n  }\n\n  handleUpdateRatioConfig = () => {\n    const { data } = this.props;\n    let { updateRatio } = data;\n    return {\n      title: {\n        text: '施工计划变更率'\n      },\n      colors: ['#40a9ff', 'rgba(0,0,0,0.05)'],\n      series: [{\n        type: 'pie',\n        data: [\n          {\n            name: '施工计划变更率',\n            y: this.fixNumber(updateRatio),\n            sliced: true,\n            dataLabels: {\n              enabled: true,\n              format: '<b>{point.name}</b>: {point.percentage:.1f} %',\n\n            },\n          },\n          {\n            name: 'Userless',\n            y: this.fixNumber(1-updateRatio),\n            dataLabels: {\n              enabled: false,\n            },\n          },\n        ]\n      }]\n    }\n  }\n\n  handleLineDividedConfig = () => {\n    const { data } = this.props;\n    let { lineDivided } = data;\n    let list = lineDivided && lineDivided.reduce((tol, cur) => {\n      tol.push(cur[1])\n      return tol\n    }, [])\n    return {\n      chart: {\n        type: 'column'\n      },\n      title: {\n        text: '施工数量(路线)'\n      },\n      xAxis: {\n        categories: [\n          '一号线', '二号线', '三号线', '四号线', '五号线', '六号线', '七号线', '八号线', '九号线', '十号线', '十一号线', '十二号线', '十三号线', '十四号线', '十五号线', '十六号线', '十七号线'\n        ],\n        crosshair: true\n      },\n      yAxis: {\n        min: 0,\n        title: {\n          text: '施工数量'\n        }\n      },\n      tooltip: {\n        // head + 每个 point + footer 拼接成完整的 table\n        headerFormat: `<span style='font-size:10px'>{point.key}</span><table>`,\n        pointFormat: `<tr><td style='color:{series.color};padding:0'>{series.name}: </td>' +\n          '<td style='padding:0'><b>{point.y:.1f} mm</b></td></tr>`,\n        footerFormat: '</table>',\n        shared: true,\n        useHTML: true\n      },\n      series: [{\n        data: list\n      }]\n    }\n  }\n\n  handleHourDividedConfig = () => {\n    const { data } = this.props;\n    let { hourDivided } = data;\n    let categories = [];\n    let datas =[];\n\n    hourDivided && hourDivided.map(divid => {\n      categories.push(divid.key);\n      datas.push(divid.value)\n    })\n\n    return {\n      chart: {\n        type: 'area'\n      },\n      title: {\n        text: '施工数量（每小时）'\n      },\n      xAxis: {\n        allowDecimals: false,\n        categories: categories,\n      },\n      yAxis: {\n        title: {\n          text: '施工小时'\n        },\n        labels: {\n          formatter: function () {\n            return this.value + 'h';\n          }\n        }\n      },\n      series: [{\n        data: datas\n      }]\n    }\n  }\n\n\n\n  render() {\n    const { data } = this.props;\n    const cashRate = {\n      title: {\n        text: '兑现率（日）'\n      },\n      colors: ['#40a9ff', 'rgba(0,0,0,0.05)'],\n      series: [{\n        type: 'pie',\n        data: [\n          {\n            name: 'Useful',\n            y: 66.0,\n            sliced: true,\n            dataLabels: {\n              enabled: true,\n              format: '<b>{point.name}</b>: {point.percentage:.1f} %',\n\n            },\n          },\n          {\n            name: 'Userless',\n            y: 34.0,\n            dataLabels: {\n              enabled: true,\n              format: '<b>{point.name}</b>: {point.percentage:.1f} %',\n\n            },\n          },\n        ]\n      }]\n    }\n\n    const workingTimeRate = {\n      title: {\n        text: '工时利用率（日）'\n      },\n      colors: ['#f5222d', 'rgba(0,0,0,0.05)'],\n      series: [{\n        type: 'pie',\n        data: [\n          {\n            name: 'Useful',\n            y: 44.0,\n            sliced: true,\n            dataLabels: {\n              enabled: true,\n              format: '<b>{point.name}</b>: {point.percentage:.1f} %',\n\n            },\n          },\n          {\n            name: 'Userless',\n            y: 56.0,\n            dataLabels: {\n              enabled: true,\n              format: '<b>{point.name}</b>: {point.percentage:.1f} %',\n\n            },\n          },\n        ]\n      }]\n    }\n\n    const standardRate = {\n      title: {\n        text: '实施规范率（日）'\n      },\n      colors: ['#f5222d', 'rgba(0,0,0,0.05)'],\n      series: [{\n        type: 'pie',\n        data: [\n          {\n            name: 'Useful',\n            y: 26.0,\n            sliced: true,\n            dataLabels: {\n              enabled: true,\n              format: '<b>{point.name}</b>: {point.percentage:.1f} %',\n\n            },\n          },\n          {\n            name: 'Userless',\n            y: 74.0,\n            dataLabels: {\n              enabled: true,\n              format: '<b>{point.name}</b>: {point.percentage:.1f} %',\n\n            },\n          },\n        ]\n      }]\n    }\n\n    const changeRate = {\n      title: {\n        text: '计划变更率（日）'\n      },\n      chart: {\n        borderColor: '#eee'\n      },\n      colors: ['#fa8c16', 'rgba(0,0,0,0.05)'],\n      series: [{\n        type: 'pie',\n        data: [\n          {\n            name: 'Useful',\n            y: 26.0,\n            sliced: true,\n            dataLabels: {\n              enabled: true,\n              format: '<b>{point.name}</b>: {point.percentage:.1f} %',\n\n            },\n          },\n          {\n            name: 'Userless',\n            y: 74.0,\n            dataLabels: {\n              enabled: true,\n              format: '<b>{point.name}</b>: {point.percentage:.1f} %',\n\n            },\n          },\n        ]\n      }]\n    }\n\n    const lineConstConf = {\n      chart: {\n        type: 'column'\n      },\n      title: {\n        text: '月平均降雨量'\n      },\n      subtitle: {\n        text: '数据来源: WorldClimate.com'\n      },\n      xAxis: {\n        categories: [\n          '一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'\n        ],\n        crosshair: true\n      },\n      yAxis: {\n        min: 0,\n        title: {\n          text: '降雨量 (mm)'\n        }\n      },\n      tooltip: {\n        // head + 每个 point + footer 拼接成完整的 table\n        headerFormat: `<span style='font-size:10px'>{point.key}</span><table>`,\n        pointFormat: `<tr><td style='color:{series.color};padding:0'>{series.name}: </td>' +\n          '<td style='padding:0'><b>{point.y:.1f} mm</b></td></tr>`,\n        footerFormat: '</table>',\n        shared: true,\n        useHTML: true\n      },\n      series: [{\n        data: [49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]\n      }]\n    }\n\n    const hourConstConf = {\n      chart: {\n        type: 'area'\n      },\n      title: {\n        text: '施工数量（每小时）'\n      },\n      xAxis: {\n        allowDecimals: false\n      },\n      yAxis: {\n        title: {\n          text: '施工小时'\n        },\n        labels: {\n          formatter: function () {\n            return this.value + 'h';\n          }\n        }\n      },\n      series: [{\n        data: [14, 12, 1, 3, 22, 6, 11, 22, 18, 12, 23, 23,\n          18, 14, 18, 18, 18, 18, 14, 22, 18, 18,\n          18, 14, 14, 18, 18, 18, 14, 17, 14,\n          18, 18, 14, 21, 21, 19, 14, 23, 16,\n          22, 19, 22, 14, 19, 19, 19, 19, 19,\n          19, 21, 17, 21, 14, 17, 14, 18, 17,\n          17, 17, 17, 17, 17, 14, 17, 17, 17]\n      }]\n    }\n\n    return <Card className='working-card' title='施工模块'>\n      <div style={{minWidth: '220px'; width: '50%';}}><ReactHighcharts config={this.handleReachRatioConfig()} /></div>\n      <div style={{minWidth: '220px'; width: '50%';}}><ReactHighcharts config={this.handleWorkingTimeRateConfig()} /></div>\n      <div style={{minWidth: '220px'; width: '50%';}}><ReactHighcharts config={this.handleUpdateRatioConfig()} /></div>\n      <div className=\"illegal\" style={{textAlign: 'center'; margin: 'auto'}}>\n        <div className=\"text\" style={{color: '#333333'; fontSize: '18px';}}>施工违规项</div>\n        <div className=\"content\" style={{color: '#3cc5d4';marginTop: '40px';fontSize: '30px';}}>\n          违规施工<span style={{margin: '0 10px'; fontSize: '50px';color: '#f5be25';}}>{data.illegal}</span>起</div>\n      </div>\n      <div style={{minWidth: '220px'; width: '50%';}}><ReactHighcharts config={this.handleLineDividedConfig()} /></div>\n      <div style={{minWidth: '220px'; width: '50%';}}><ReactHighcharts config={this.handleHourDividedConfig()} /></div>\n    </Card>\n  }\n}"]}]}