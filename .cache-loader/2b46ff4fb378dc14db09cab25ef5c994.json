{"remainingRequest":"G:\\外包\\Metro\\Metro\\node_modules\\thread-loader\\dist\\cjs.js??ref--4-1!G:\\外包\\Metro\\Metro\\node_modules\\ts-loader\\index.js??ref--4-2!G:\\外包\\Metro\\Metro\\src\\pages\\Reports\\ReportsRedux.tsx","dependencies":[{"path":"G:\\外包\\Metro\\Metro\\src\\pages\\Reports\\ReportsRedux.tsx","mtime":1530592603616},{"path":"G:\\外包\\Metro\\Metro\\node_modules\\cache-loader\\dist\\cjs.js","mtime":0},{"path":"G:\\外包\\Metro\\Metro\\node_modules\\thread-loader\\dist\\cjs.js","mtime":0},{"path":"G:\\外包\\Metro\\Metro\\node_modules\\ts-loader\\index.js","mtime":1528433923000}],"contextDependencies":[],"result":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst http_1 = require(\"../../utils/http\");\r\nconst antd_1 = require(\"antd\");\r\nconst react_router_1 = require(\"react-router\");\r\nconst prefix = 'reports/';\r\nvar DataType;\r\n(function (DataType) {\r\n    // 'breakdown_facility_result' = 'faultData',\r\n    // 'construction_information_result' = 'workingData',\r\n    // 'facility_information_result' = 'equipData',\r\n    // 'material_information_result' = 'materialData',\r\n    // 'polling_information_result' = 'checkInData',\r\n    DataType[\"material_information_result\"] = \"materialData\";\r\n    DataType[\"polling_avg_duration_result\"] = \"pollingDurationData\";\r\n    DataType[\"polling_num_hour_result\"] = \"pollingHourData\";\r\n    DataType[\"polling_num_result\"] = \"pollingData\";\r\n    DataType[\"construction_cashing_rate_result\"] = \"constructionCashingData\";\r\n    DataType[\"construction_utilization_ratio_result\"] = \"constructionUtilizationData\";\r\n    DataType[\"construction_change_rate_result\"] = \"constructionChangeData\";\r\n    DataType[\"construction_irregularities_result\"] = \"constructionIrregularitiesData\";\r\n    DataType[\"construction_line_result\"] = \"constructionLineData\";\r\n    DataType[\"facility_class_sum_result\"] = \"facilityData\";\r\n    DataType[\"breakdown_facility_01_result\"] = \"breakdownFacility01Data\";\r\n    DataType[\"breakdown_facility_02_result\"] = \"breakdownFacility02Data\";\r\n    DataType[\"breakdown_type_ratio_result\"] = \"breakdownTypeData\";\r\n    DataType[\"breakdown_statu_result\"] = \"breakdownStatuData\";\r\n    DataType[\"breakdown_24h_sum_result\"] = \"breakdown24hSumData\";\r\n    DataType[\"breakdown_line_sum_result\"] = \"breakdownLineData\";\r\n    DataType[\"breakdown_facility_origin\"] = \"originFaultData\";\r\n    DataType[\"construction_information_origin\"] = \"originWorkingData\";\r\n    DataType[\"facility_information_origin\"] = \"originEquipData\";\r\n    DataType[\"material_information_origin\"] = \"originMaterialData\";\r\n    DataType[\"polling_information_origin\"] = \"originCheckInData\";\r\n})(DataType || (DataType = {}));\r\nexports.DataType = DataType;\r\nconst getResultTables = () => {\r\n    return (dispatch) => {\r\n        return fetch(`${http_1.url}/getResultTables`, {\r\n            credentials: \"include\",\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }).then((res) => res.json()).then(data => {\r\n            dispatch({\r\n                type: `${prefix}resultTables`,\r\n                payload: data\r\n            });\r\n            if (data.errMsg) {\r\n                if (data.code === 401) {\r\n                    react_router_1.browserHistory.push('/login');\r\n                }\r\n                antd_1.message.error(data.errMsg);\r\n            }\r\n            return data;\r\n        });\r\n    };\r\n};\r\nconst getOriginTables = () => {\r\n    return (dispatch) => {\r\n        return fetch(`${http_1.url}/getOriginTables`, {\r\n            credentials: \"include\",\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }).then((res) => res.json()).then(data => {\r\n            dispatch({\r\n                type: `${prefix}originTables`,\r\n                payload: data\r\n            });\r\n            if (data.errMsg) {\r\n                if (data.code === 401) {\r\n                    react_router_1.browserHistory.push('/login');\r\n                }\r\n                antd_1.message.error(data.errMsg);\r\n            }\r\n            return data;\r\n        });\r\n    };\r\n};\r\nconst updateData = (selectedTable, editingItem, value) => {\r\n    return () => {\r\n        return fetch(`${http_1.url}/updateData`, {\r\n            method: 'POST',\r\n            credentials: \"include\",\r\n            body: JSON.stringify({\r\n                selectedTable,\r\n                editingItem,\r\n                value,\r\n                editor: 'zhouyun'\r\n            }),\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }).then((res) => res.json()).then(data => {\r\n            if (data.errMsg) {\r\n                if (data.code === 401) {\r\n                    react_router_1.browserHistory.push('/login');\r\n                }\r\n                antd_1.message.error(data.errMsg);\r\n            }\r\n            return data;\r\n        });\r\n    };\r\n};\r\n/** 获取原始数据 */\r\nconst getData = (selectedTable, timeRange, field, keyword) => {\r\n    return (dispatch) => {\r\n        return fetch(`${http_1.url}/getData?table=${selectedTable}&timeRange=${[new Date(timeRange[0]).toLocaleDateString(), new Date(timeRange[1]).toLocaleDateString()]}&keyword=${keyword}&field=${field}`, {\r\n            credentials: \"include\",\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }).then((res) => res.json()).then(data => {\r\n            dispatch({\r\n                type: `${prefix}${DataType[selectedTable]}`,\r\n                payload: data\r\n            });\r\n            if (data.errMsg) {\r\n                if (data.code === 401) {\r\n                    react_router_1.browserHistory.push('/login');\r\n                }\r\n                antd_1.message.error(data.errMsg);\r\n            }\r\n            return data;\r\n        });\r\n    };\r\n};\r\nconst getCalcData = (timeRange) => {\r\n    return (dispatch) => {\r\n        return fetch(`${http_1.url}/getCalcData?timeRange=${[new Date(timeRange[0]).toLocaleDateString(), new Date(timeRange[1]).toLocaleDateString()]}`, {\r\n            credentials: \"include\",\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }).then((res) => res.json()).then(data => {\r\n            dispatch({\r\n                type: `${prefix}CalcData`,\r\n                payload: data\r\n            });\r\n            if (data.errMsg) {\r\n                if (data.code === 401) {\r\n                    react_router_1.browserHistory.push('/login');\r\n                }\r\n                antd_1.message.error(data.errMsg);\r\n            }\r\n            return data;\r\n        });\r\n    };\r\n};\r\nconst screenshot = (content, width, height) => {\r\n    return () => {\r\n        return fetch(`${http_1.url}/screenshot`, {\r\n            credentials: \"include\",\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            method: 'POST',\r\n            body: JSON.stringify({\r\n                content,\r\n                width,\r\n                height\r\n            }),\r\n        }).then((res) => res.json()).then(data => {\r\n            if (data.errMsg) {\r\n                if (data.code === 401) {\r\n                    react_router_1.browserHistory.push('/login');\r\n                }\r\n                antd_1.message.error(data.errMsg);\r\n            }\r\n            return data;\r\n        });\r\n    };\r\n};\r\nconst actions = {\r\n    getData,\r\n    updateData,\r\n    getResultTables,\r\n    screenshot,\r\n    getCalcData,\r\n    getOriginTables\r\n};\r\nexports.actions = actions;\r\nclass InitState {\r\n}\r\nexports.InitState = InitState;\r\nconst reducer = (state = new InitState(), action) => {\r\n    switch (action.type) {\r\n        case `${prefix}materialData`: {\r\n            return Object.assign({}, state, { materialData: action.payload });\r\n        }\r\n        case `${prefix}pollingDurationData`: {\r\n            return Object.assign({}, state, { pollingDurationData: action.payload });\r\n        }\r\n        case `${prefix}pollingHourData`:\r\n            return Object.assign({}, state, { pollingHourData: action.payload });\r\n        case `${prefix}pollingData`:\r\n            return Object.assign({}, state, { pollingData: action.payload });\r\n        case `${prefix}constructionCashingData`:\r\n            return Object.assign({}, state, { constructionCashingData: action.payload });\r\n        case `${prefix}constructionUtilizationData`:\r\n            return Object.assign({}, state, { constructionUtilizationData: action.payload });\r\n        case `${prefix}constructionChangeData`:\r\n            return Object.assign({}, state, { constructionChangeData: action.payload });\r\n        case `${prefix}constructionIrregularitiesData`:\r\n            return Object.assign({}, state, { constructionIrregularitiesData: action.payload });\r\n        case `${prefix}constructionLineData`:\r\n            return Object.assign({}, state, { constructionLineData: action.payload });\r\n        case `${prefix}facilityData`:\r\n            return Object.assign({}, state, { facilityData: action.payload });\r\n        case `${prefix}breakdownFacility01Data`:\r\n            return Object.assign({}, state, { breakdownFacility01Data: action.payload });\r\n        case `${prefix}breakdownFacility02Data`:\r\n            return Object.assign({}, state, { breakdownFacility02Data: action.payload });\r\n        case `${prefix}breakdownTypeData`:\r\n            return Object.assign({}, state, { breakdownTypeData: action.payload });\r\n        case `${prefix}breakdownStatuData`:\r\n            return Object.assign({}, state, { breakdownStatuData: action.payload });\r\n        case `${prefix}breakdown24hSumData`:\r\n            return Object.assign({}, state, { breakdown24hSumData: action.payload });\r\n        case `${prefix}breakdownLineData`:\r\n            return Object.assign({}, state, { breakdownLineData: action.payload });\r\n        case `${prefix}originFaultData`:\r\n            return Object.assign({}, state, { originFaultData: action.payload });\r\n        case `${prefix}originWorkingData`:\r\n            return Object.assign({}, state, { originWorkingData: action.payload });\r\n        case `${prefix}originEquipData`:\r\n            return Object.assign({}, state, { originEquipData: action.payload });\r\n        case `${prefix}originMaterialData`:\r\n            return Object.assign({}, state, { originMaterialData: action.payload });\r\n        case `${prefix}originCheckInData`:\r\n            return Object.assign({}, state, { originCheckInData: action.payload });\r\n        case `${prefix}CalcData`: {\r\n            return Object.assign({}, state, { calcData: action.payload });\r\n        }\r\n        case `${prefix}resultTables`: {\r\n            return Object.assign({}, state, { resultTables: action.payload });\r\n        }\r\n        case `${prefix}originTables`: {\r\n            return Object.assign({}, state, { originTables: action.payload });\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\nexports.reducer = reducer;\r\n",{"version":3,"file":"G:\\外包\\Metro\\Metro\\src\\pages\\Reports\\ReportsRedux.tsx","sourceRoot":"","sources":["G:\\外包\\Metro\\Metro\\src\\pages\\Reports\\ReportsRedux.tsx"],"names":[],"mappings":";;AAAA,2CAAiD;AACjD,+BAA+B;AAC/B,+CAA8C;AAE9C,MAAM,MAAM,GAAG,UAAU,CAAC;AAE1B,IAAK,QA4BJ;AA5BD,WAAK,QAAQ;IACX,6CAA6C;IAC7C,qDAAqD;IACrD,+CAA+C;IAC/C,kDAAkD;IAClD,gDAAgD;IAChD,wDAA8C,CAAA;IAC9C,+DAAqD,CAAA;IACrD,uDAA6C,CAAA;IAC7C,8CAAoC,CAAA;IACpC,wEAA8D,CAAA;IAC9D,iFAAuE,CAAA;IACvE,sEAA4D,CAAA;IAC5D,iFAAuE,CAAA;IACvE,6DAAmD,CAAA;IACnD,sDAA4C,CAAA;IAC5C,oEAA0D,CAAA;IAC1D,oEAA0D,CAAA;IAC1D,6DAAmD,CAAA;IACnD,yDAA+C,CAAA;IAC/C,4DAAkD,CAAA;IAClD,2DAAiD,CAAA;IAEjD,yDAA+C,CAAA;IAC/C,iEAAuD,CAAA;IACvD,2DAAiD,CAAA;IACjD,8DAAoD,CAAA;IACpD,4DAAkD,CAAA;AACpD,CAAC,EA5BI,QAAQ,KAAR,QAAQ,QA4BZ;AA2VqC,4BAAQ;AAzV9C,MAAM,eAAe,GAAG,GAAG,EAAE;IAC3B,OAAO,CAAC,QAAQ,EAAE,EAAE;QAClB,OAAO,KAAK,CAAC,GAAG,UAAG,kBAAkB,EAAE;YACrC,WAAW,EAAE,SAAS;YACtB,OAAO,EAAE;gBACP,cAAc,EAAE,kBAAkB;aACnC;SACF,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;YACvC,QAAQ,CAAC;gBACP,IAAI,EAAE,GAAG,MAAM,cAAc;gBAC7B,OAAO,EAAE,IAAI;aACd,CAAC,CAAA;YAEF,IAAI,IAAI,CAAC,MAAM,EAAE;gBACf,IAAG,IAAI,CAAC,IAAI,KAAK,GAAG,EAAE;oBACpB,6BAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;iBAC/B;gBACD,cAAO,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aAC5B;YAED,OAAO,IAAI,CAAA;QACb,CAAC,CAAC,CAAA;IACJ,CAAC,CAAA;AACH,CAAC,CAAA;AAED,MAAM,eAAe,GAAG,GAAG,EAAE;IAC3B,OAAO,CAAC,QAAQ,EAAE,EAAE;QAClB,OAAO,KAAK,CAAC,GAAG,UAAG,kBAAkB,EAAE;YACrC,WAAW,EAAE,SAAS;YACtB,OAAO,EAAE;gBACP,cAAc,EAAE,kBAAkB;aACnC;SACF,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;YACvC,QAAQ,CAAC;gBACP,IAAI,EAAE,GAAG,MAAM,cAAc;gBAC7B,OAAO,EAAE,IAAI;aACd,CAAC,CAAA;YAEF,IAAI,IAAI,CAAC,MAAM,EAAE;gBACf,IAAG,IAAI,CAAC,IAAI,KAAK,GAAG,EAAE;oBACpB,6BAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;iBAC/B;gBACD,cAAO,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aAC5B;YAED,OAAO,IAAI,CAAA;QACb,CAAC,CAAC,CAAA;IACJ,CAAC,CAAA;AACH,CAAC,CAAA;AAED,MAAM,UAAU,GAAG,CAAC,aAAa,EAAE,WAAW,EAAE,KAAK,EAAE,EAAE;IACvD,OAAO,GAAG,EAAE;QACV,OAAO,KAAK,CAAC,GAAG,UAAG,aAAa,EAAE;YAChC,MAAM,EAAE,MAAM;YACd,WAAW,EAAE,SAAS;YACtB,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC;gBACnB,aAAa;gBACb,WAAW;gBACX,KAAK;gBACL,MAAM,EAAE,SAAS;aAClB,CAAC;YACF,OAAO,EAAE;gBACP,cAAc,EAAE,kBAAkB;aACnC;SACF,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;YACvC,IAAI,IAAI,CAAC,MAAM,EAAE;gBACf,IAAG,IAAI,CAAC,IAAI,KAAK,GAAG,EAAE;oBACpB,6BAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;iBAC/B;gBACD,cAAO,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aAC5B;YACD,OAAO,IAAI,CAAC;QACd,CAAC,CAAC,CAAC;IACL,CAAC,CAAA;AACH,CAAC,CAAA;AAED,aAAa;AACb,MAAM,OAAO,GAAG,CAAC,aAAa,EAAE,SAAS,EAAE,KAAK,EAAE,OAAQ,EAAE,EAAE;IAC5D,OAAO,CAAC,QAAQ,EAAE,EAAE;QAClB,OAAO,KAAK,CAAC,GAAG,UAAG,kBAAkB,aAAa,cAAc,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,kBAAkB,EAAE,EAAE,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,kBAAkB,EAAE,CAAC,YAAY,OAAO,UAAU,KAAK,EAAE,EAAE;YAC9L,WAAW,EAAE,SAAS;YACtB,OAAO,EAAE;gBACP,cAAc,EAAE,kBAAkB;aACnC;SACF,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;YACvC,QAAQ,CAAC;gBACP,IAAI,EAAE,GAAG,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,EAAE;gBAC3C,OAAO,EAAE,IAAI;aACd,CAAC,CAAA;YAEF,IAAI,IAAI,CAAC,MAAM,EAAE;gBACf,IAAG,IAAI,CAAC,IAAI,KAAK,GAAG,EAAE;oBACpB,6BAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;iBAC/B;gBACD,cAAO,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aAC5B;YACD,OAAO,IAAI,CAAA;QACb,CAAC,CAAC,CAAA;IACJ,CAAC,CAAA;AACH,CAAC,CAAA;AAED,MAAM,WAAW,GAAG,CAAC,SAAS,EAAE,EAAE;IAChC,OAAO,CAAC,QAAQ,EAAE,EAAE;QAClB,OAAO,KAAK,CAAC,GAAG,UAAG,0BAA0B,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,kBAAkB,EAAE,EAAE,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,kBAAkB,EAAE,CAAC,EAAE,EAAE;YACzI,WAAW,EAAE,SAAS;YACtB,OAAO,EAAE;gBACP,cAAc,EAAE,kBAAkB;aACnC;SACF,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;YACvC,QAAQ,CAAC;gBACP,IAAI,EAAE,GAAG,MAAM,UAAU;gBACzB,OAAO,EAAE,IAAI;aACd,CAAC,CAAA;YAEF,IAAI,IAAI,CAAC,MAAM,EAAE;gBACf,IAAG,IAAI,CAAC,IAAI,KAAK,GAAG,EAAE;oBACpB,6BAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;iBAC/B;gBACD,cAAO,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aAC5B;YACD,OAAO,IAAI,CAAA;QACb,CAAC,CAAC,CAAA;IACJ,CAAC,CAAA;AACH,CAAC,CAAA;AAED,MAAM,UAAU,GAAG,CAAC,OAAO,EAAE,KAAK,EAAE,MAAM,EAAE,EAAE;IAC5C,OAAO,GAAG,EAAE;QACV,OAAO,KAAK,CAAC,GAAG,UAAG,aAAa,EAAE;YAChC,WAAW,EAAE,SAAS;YACtB,OAAO,EAAE;gBACP,cAAc,EAAE,kBAAkB;aACnC;YACD,MAAM,EAAE,MAAM;YACd,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC;gBACnB,OAAO;gBACP,KAAK;gBACL,MAAM;aACP,CAAC;SACH,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;YACvC,IAAI,IAAI,CAAC,MAAM,EAAE;gBACf,IAAG,IAAI,CAAC,IAAI,KAAK,GAAG,EAAE;oBACpB,6BAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;iBAC/B;gBACD,cAAO,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aAC5B;YACD,OAAO,IAAI,CAAA;QACb,CAAC,CAAC,CAAA;IACJ,CAAC,CAAA;AACH,CAAC,CAAA;AAED,MAAM,OAAO,GAAG;IACd,OAAO;IACP,UAAU;IACV,eAAe;IACf,UAAU;IACV,WAAW;IACX,eAAe;CAChB,CAAA;AA4LQ,0BAAO;AA1LhB;CAgCC;AA0J0B,8BAAS;AAxJpC,MAAM,OAAO,GAAG,CAAC,KAAK,GAAG,IAAI,SAAS,EAAE,EAAE,MAAM,EAAa,EAAE;IAC7D,QAAQ,MAAM,CAAC,IAAI,EAAE;QACnB,KAAK,GAAG,MAAM,cAAc,CAAC,CAAC;YAC5B,yBACK,KAAK,IACR,YAAY,EAAE,MAAM,CAAC,OAAO,IAC7B;SACF;QAED,KAAK,GAAG,MAAM,qBAAqB,CAAC,CAAC;YACnC,yBACK,KAAK,IACR,mBAAmB,EAAE,MAAM,CAAC,OAAO,IACpC;SACF;QAED,KAAK,GAAG,MAAM,iBAAiB;YAC7B,yBACK,KAAK,IACR,eAAe,EAAE,MAAM,CAAC,OAAO,IAChC;QAEH,KAAK,GAAG,MAAM,aAAa;YACzB,yBACK,KAAK,IACR,WAAW,EAAE,MAAM,CAAC,OAAO,IAC5B;QAEH,KAAK,GAAG,MAAM,yBAAyB;YACrC,yBACK,KAAK,IACR,uBAAuB,EAAE,MAAM,CAAC,OAAO,IACxC;QAEH,KAAK,GAAG,MAAM,6BAA6B;YACzC,yBACK,KAAK,IACR,2BAA2B,EAAE,MAAM,CAAC,OAAO,IAC5C;QAEH,KAAK,GAAG,MAAM,wBAAwB;YACpC,yBACK,KAAK,IACR,sBAAsB,EAAE,MAAM,CAAC,OAAO,IACvC;QAEH,KAAK,GAAG,MAAM,gCAAgC;YAC5C,yBACK,KAAK,IACR,8BAA8B,EAAE,MAAM,CAAC,OAAO,IAC/C;QAEH,KAAK,GAAG,MAAM,sBAAsB;YAClC,yBACK,KAAK,IACR,oBAAoB,EAAE,MAAM,CAAC,OAAO,IACrC;QAEH,KAAK,GAAG,MAAM,cAAc;YAC1B,yBACK,KAAK,IACR,YAAY,EAAE,MAAM,CAAC,OAAO,IAC7B;QAEH,KAAK,GAAG,MAAM,yBAAyB;YACrC,yBACK,KAAK,IACR,uBAAuB,EAAE,MAAM,CAAC,OAAO,IACxC;QAED,KAAK,GAAG,MAAM,yBAAyB;YACvC,yBACK,KAAK,IACR,uBAAuB,EAAE,MAAM,CAAC,OAAO,IACxC;QAED,KAAK,GAAG,MAAM,mBAAmB;YACjC,yBACK,KAAK,IACR,iBAAiB,EAAE,MAAM,CAAC,OAAO,IAClC;QAED,KAAK,GAAG,MAAM,oBAAoB;YAClC,yBACK,KAAK,IACR,kBAAkB,EAAE,MAAM,CAAC,OAAO,IACnC;QAED,KAAK,GAAG,MAAM,qBAAqB;YACnC,yBACK,KAAK,IACR,mBAAmB,EAAE,MAAM,CAAC,OAAO,IACpC;QAED,KAAK,GAAG,MAAM,mBAAmB;YACjC,yBACK,KAAK,IACR,iBAAiB,EAAE,MAAM,CAAC,OAAO,IAClC;QAGD,KAAK,GAAG,MAAM,iBAAiB;YAC/B,yBACK,KAAK,IACR,eAAe,EAAE,MAAM,CAAC,OAAO,IAChC;QACH,KAAK,GAAG,MAAM,mBAAmB;YAC/B,yBACK,KAAK,IACR,iBAAiB,EAAE,MAAM,CAAC,OAAO,IAClC;QACH,KAAK,GAAG,MAAM,iBAAiB;YAC7B,yBACK,KAAK,IACR,eAAe,EAAE,MAAM,CAAC,OAAO,IAChC;QACH,KAAK,GAAG,MAAM,oBAAoB;YAChC,yBACK,KAAK,IACR,kBAAkB,EAAE,MAAM,CAAC,OAAO,IACnC;QACH,KAAK,GAAG,MAAM,mBAAmB;YAC/B,yBACK,KAAK,IACR,iBAAiB,EAAE,MAAM,CAAC,OAAO,IAClC;QAEH,KAAK,GAAG,MAAM,UAAU,CAAC,CAAC;YACxB,yBACK,KAAK,IACR,QAAQ,EAAE,MAAM,CAAC,OAAO,IACzB;SACF;QAED,KAAK,GAAG,MAAM,cAAc,CAAC,CAAC;YAC5B,yBACK,KAAK,IACR,YAAY,EAAE,MAAM,CAAC,OAAO,IAC7B;SACF;QACD,KAAK,GAAG,MAAM,cAAc,CAAC,CAAC;YAC5B,yBACK,KAAK,IACR,YAAY,EAAE,MAAM,CAAC,OAAO,IAC7B;SACF;QAED;YACE,OAAO,KAAK,CAAA;KACf;AACH,CAAC,CAAA;AAEiB,0BAAO","sourcesContent":["import { url, Response } from '../../utils/http';\r\nimport { message } from 'antd';\r\nimport { browserHistory } from 'react-router';\r\n\r\nconst prefix = 'reports/';\r\n\r\nenum DataType {\r\n  // 'breakdown_facility_result' = 'faultData',\r\n  // 'construction_information_result' = 'workingData',\r\n  // 'facility_information_result' = 'equipData',\r\n  // 'material_information_result' = 'materialData',\r\n  // 'polling_information_result' = 'checkInData',\r\n  'material_information_result' = 'materialData',\r\n  'polling_avg_duration_result' = 'pollingDurationData',\r\n  'polling_num_hour_result' = 'pollingHourData',\r\n  'polling_num_result' = 'pollingData',\r\n  'construction_cashing_rate_result' = 'constructionCashingData',\r\n  'construction_utilization_ratio_result' = 'constructionUtilizationData',\r\n  'construction_change_rate_result' = 'constructionChangeData',\r\n  'construction_irregularities_result' = 'constructionIrregularitiesData',\r\n  'construction_line_result' = 'constructionLineData',\r\n  'facility_class_sum_result' = 'facilityData',\r\n  'breakdown_facility_01_result' = 'breakdownFacility01Data',\r\n  'breakdown_facility_02_result' = 'breakdownFacility02Data',\r\n  'breakdown_type_ratio_result' = 'breakdownTypeData',\r\n  'breakdown_statu_result' = 'breakdownStatuData',\r\n  'breakdown_24h_sum_result' = 'breakdown24hSumData',\r\n  'breakdown_line_sum_result' = 'breakdownLineData',\r\n\r\n  'breakdown_facility_origin' = 'originFaultData',\r\n  'construction_information_origin' = 'originWorkingData',\r\n  'facility_information_origin' = 'originEquipData',\r\n  'material_information_origin' = 'originMaterialData',\r\n  'polling_information_origin' = 'originCheckInData'\r\n}\r\n\r\nconst getResultTables = () => {\r\n  return (dispatch) => {\r\n    return fetch(`${url}/getResultTables`, {\r\n      credentials: \"include\",\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then((res) => res.json()).then(data => {\r\n      dispatch({\r\n        type: `${prefix}resultTables`,\r\n        payload: data\r\n      })\r\n\r\n      if (data.errMsg) {\r\n        if(data.code === 401) {\r\n          browserHistory.push('/login');\r\n        }\r\n        message.error(data.errMsg);\r\n      }\r\n\r\n      return data\r\n    })\r\n  }\r\n}\r\n\r\nconst getOriginTables = () => {\r\n  return (dispatch) => {\r\n    return fetch(`${url}/getOriginTables`, {\r\n      credentials: \"include\",\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then((res) => res.json()).then(data => {\r\n      dispatch({\r\n        type: `${prefix}originTables`,\r\n        payload: data\r\n      })\r\n\r\n      if (data.errMsg) {\r\n        if(data.code === 401) {\r\n          browserHistory.push('/login');\r\n        }\r\n        message.error(data.errMsg);\r\n      }\r\n\r\n      return data\r\n    })\r\n  }\r\n}\r\n\r\nconst updateData = (selectedTable, editingItem, value) => {\r\n  return () => {\r\n    return fetch(`${url}/updateData`, {\r\n      method: 'POST',\r\n      credentials: \"include\",\r\n      body: JSON.stringify({\r\n        selectedTable,\r\n        editingItem,\r\n        value,\r\n        editor: 'zhouyun'\r\n      }),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then((res) => res.json()).then(data => {\r\n      if (data.errMsg) {\r\n        if(data.code === 401) {\r\n          browserHistory.push('/login');\r\n        }\r\n        message.error(data.errMsg);\r\n      }\r\n      return data;\r\n    });\r\n  }\r\n}\r\n\r\n/** 获取原始数据 */\r\nconst getData = (selectedTable, timeRange, field, keyword?) => {\r\n  return (dispatch) => {\r\n    return fetch(`${url}/getData?table=${selectedTable}&timeRange=${[new Date(timeRange[0]).toLocaleDateString(), new Date(timeRange[1]).toLocaleDateString()]}&keyword=${keyword}&field=${field}`, {\r\n      credentials: \"include\",\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then((res) => res.json()).then(data => {\r\n      dispatch({\r\n        type: `${prefix}${DataType[selectedTable]}`,\r\n        payload: data\r\n      })\r\n\r\n      if (data.errMsg) {\r\n        if(data.code === 401) {\r\n          browserHistory.push('/login');\r\n        }\r\n        message.error(data.errMsg);\r\n      }\r\n      return data\r\n    })\r\n  }\r\n}\r\n\r\nconst getCalcData = (timeRange) => {\r\n  return (dispatch) => {\r\n    return fetch(`${url}/getCalcData?timeRange=${[new Date(timeRange[0]).toLocaleDateString(), new Date(timeRange[1]).toLocaleDateString()]}`, {\r\n      credentials: \"include\",\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then((res) => res.json()).then(data => {\r\n      dispatch({\r\n        type: `${prefix}CalcData`,\r\n        payload: data\r\n      })\r\n\r\n      if (data.errMsg) {\r\n        if(data.code === 401) {\r\n          browserHistory.push('/login');\r\n        }\r\n        message.error(data.errMsg);\r\n      }\r\n      return data\r\n    })\r\n  }\r\n}\r\n\r\nconst screenshot = (content, width, height) => {\r\n  return () => {\r\n    return fetch(`${url}/screenshot`, {\r\n      credentials: \"include\",\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        content,\r\n        width,\r\n        height\r\n      }),\r\n    }).then((res) => res.json()).then(data => {\r\n      if (data.errMsg) {\r\n        if(data.code === 401) {\r\n          browserHistory.push('/login');\r\n        }\r\n        message.error(data.errMsg);\r\n      }\r\n      return data\r\n    })\r\n  }\r\n}\r\n\r\nconst actions = {\r\n  getData,\r\n  updateData,\r\n  getResultTables,\r\n  screenshot,\r\n  getCalcData,\r\n  getOriginTables\r\n}\r\n\r\nclass InitState {\r\n  // materialData: Response;\r\n  pollingDurationData: Response;\r\n  pollingHourData: Response;\r\n  pollingData: Response;\r\n  constructionCashingData: Response;\r\n  constructionUtilizationData: Response;\r\n  constructionChangeData: Response;\r\n  constructionIrregularitiesData: Response;\r\n  constructionLineData: Response;\r\n  facilityData: Response;\r\n  breakdownFacility01Data: Response;\r\n  breakdownFacility02Data: Response;\r\n  breakdownTypeData: Response;\r\n  breakdownStatuData: Response;\r\n  breakdown24hSumData: Response;\r\n  breakdownLineData: Response;\r\n\r\n  faultData: Response;\r\n  workingData: Response;\r\n  equipData: Response;\r\n  materialData: Response;\r\n  checkInData: Response;\r\n\r\n  resultTables: Response;\r\n  calcData: Response;\r\n  originTables: Response;\r\n  originFaultData: Response;\r\n  originWorkingData: Response;\r\n  originEquipData: Response;\r\n  originMaterialData: Response;\r\n  originCheckInData: Response;\r\n}\r\n\r\nconst reducer = (state = new InitState(), action): InitState => {\r\n  switch (action.type) {\r\n    case `${prefix}materialData`: {\r\n      return {\r\n        ...state,\r\n        materialData: action.payload\r\n      }\r\n    }\r\n\r\n    case `${prefix}pollingDurationData`: {\r\n      return {\r\n        ...state,\r\n        pollingDurationData: action.payload\r\n      }\r\n    }\r\n\r\n    case `${prefix}pollingHourData`:\r\n      return {\r\n        ...state,\r\n        pollingHourData: action.payload\r\n      }\r\n\r\n    case `${prefix}pollingData`:\r\n      return {\r\n        ...state,\r\n        pollingData: action.payload\r\n      }\r\n\r\n    case `${prefix}constructionCashingData`:\r\n      return {\r\n        ...state,\r\n        constructionCashingData: action.payload\r\n      }\r\n\r\n    case `${prefix}constructionUtilizationData`:\r\n      return {\r\n        ...state,\r\n        constructionUtilizationData: action.payload\r\n      }\r\n\r\n    case `${prefix}constructionChangeData`:\r\n      return {\r\n        ...state,\r\n        constructionChangeData: action.payload\r\n      }\r\n\r\n    case `${prefix}constructionIrregularitiesData`:\r\n      return {\r\n        ...state,\r\n        constructionIrregularitiesData: action.payload\r\n      }\r\n\r\n    case `${prefix}constructionLineData`:\r\n      return {\r\n        ...state,\r\n        constructionLineData: action.payload\r\n      }\r\n\r\n    case `${prefix}facilityData`:\r\n      return {\r\n        ...state,\r\n        facilityData: action.payload\r\n      }\r\n\r\n    case `${prefix}breakdownFacility01Data`:\r\n      return {\r\n        ...state,\r\n        breakdownFacility01Data: action.payload\r\n      }\r\n    \r\n      case `${prefix}breakdownFacility02Data`:\r\n      return {\r\n        ...state,\r\n        breakdownFacility02Data: action.payload\r\n      }\r\n\r\n      case `${prefix}breakdownTypeData`:\r\n      return {\r\n        ...state,\r\n        breakdownTypeData: action.payload\r\n      }\r\n\r\n      case `${prefix}breakdownStatuData`:\r\n      return {\r\n        ...state,\r\n        breakdownStatuData: action.payload\r\n      }\r\n\r\n      case `${prefix}breakdown24hSumData`:\r\n      return {\r\n        ...state,\r\n        breakdown24hSumData: action.payload\r\n      }\r\n\r\n      case `${prefix}breakdownLineData`:\r\n      return {\r\n        ...state,\r\n        breakdownLineData: action.payload\r\n      }\r\n\r\n\r\n      case `${prefix}originFaultData`:\r\n      return {\r\n        ...state,\r\n        originFaultData: action.payload\r\n      }\r\n    case `${prefix}originWorkingData`:\r\n      return {\r\n        ...state,\r\n        originWorkingData: action.payload\r\n      }\r\n    case `${prefix}originEquipData`:\r\n      return {\r\n        ...state,\r\n        originEquipData: action.payload\r\n      }\r\n    case `${prefix}originMaterialData`:\r\n      return {\r\n        ...state,\r\n        originMaterialData: action.payload\r\n      }\r\n    case `${prefix}originCheckInData`:\r\n      return {\r\n        ...state,\r\n        originCheckInData: action.payload\r\n      }\r\n\r\n    case `${prefix}CalcData`: {\r\n      return {\r\n        ...state,\r\n        calcData: action.payload\r\n      }\r\n    }\r\n\r\n    case `${prefix}resultTables`: {\r\n      return {\r\n        ...state,\r\n        resultTables: action.payload\r\n      }\r\n    }\r\n    case `${prefix}originTables`: {\r\n      return {\r\n        ...state,\r\n        originTables: action.payload\r\n      }\r\n    }\r\n    \r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport { actions, reducer, InitState, DataType }"]}]}